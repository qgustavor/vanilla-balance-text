(function(v){function y(){this.reset()}var k=document.documentElement.style,E=k.textWrap||k.WebkitTextWrap||k.MozTextWrap||k.MsTextWrap||k.OTextWrap,w;y.prototype.reset=function(){this.width=this.index=0};var A=function(b,d){var a=/\s(?![^<]*>)/g,f;if(!w)for(w=[];null!==(f=a.exec(b));)w.push(f.index);return-1!==w.indexOf(d)},B=function(b){if(b){var d=!1,a;b.hasAttribute("id")?a=b.getAttribute("id"):(a="balancetext_"+Date.now(),b.setAttribute("id",a),d=!0);for(var f=document.querySelectorAll("#"+a+
' br[data-owner="balance-text"]'),c=0;c<f.length;c++)f[c].parentNode.replaceChild(document.createTextNode(" "),f[c]);a=document.querySelectorAll("#"+a+' span[data-owner="balance-text"]');if(0<a.length){f="";for(c=0;c<a.length;c++)f+=a[c].textContent,a[c].parentNode.removeChild(a[c]);b.innerHTML=f}d&&b.removeAttribute("id")}},C=function(b,d,a){d=d.trim();var f=d.split(" ").length;d+=" ";if(2>f)return d;var c=document.createElement("span");c.innerHTML=d;b.appendChild(c);d=parseInt(window.getComputedStyle(c).width)||
c.offsetWidth;b.removeChild(c);c.style.wordSpacing=Math.floor((a-d)/(f-1))+"px";c.setAttribute("data-owner","balance-text");c&&c.tagName?c.outerHTML?c=c.outerHTML:(b=document.createElement("div"),b.appendChild(c.cloneNode(!0)),c=b.innerHTML):c="";return c},F=function(b,d){return 0===d||d===b.length||A(b,d-1)&&!A(b,d)},z=function(b,d,a,f,c,m,k){var p;if(d&&"string"===typeof d)for(;;){for(;!F(d,m);)m+=c;b.innerHTML=d.substr(0,m);p=b.offsetWidth;if(0>c?p<=f||0>=p||0===m:f<=p||a<=p||m===d.length)break;
m+=c}k.index=m;k.width=p},D=function(b){if(!E&&void 0!==b){void 0===b.length&&(b=[b]);for(var d=0;d<b.length;d++){var a=b[d];B(a);var f=a.style.whiteSpace,c=a.style.cssFloat,m=a.style.display,v=a.style.position,p=a.style.lineHeight;a.style.lineHeight="normal";var q=a.offsetWidth,u=a.offsetHeight;a.style.whiteSpace="nowrap";a.style.cssFloat="none";a.style.display="inline";a.style.position="static";a.getBoundingClientRect();var g=a.offsetWidth,h=a.offsetHeight,x;if("pre-wrap"===f)x=0;else{var l=a;x=
h;var e=document.createElement("div");e.style.display="block";e.style.position="absolute";e.style.bottom=0;e.style.right=0;e.style.width=0;e.style.height=0;e.style.margin=0;e.style.padding=0;e.style.visibility="hidden";e.style.overflow="hidden";var r=document.createElement("span");r.style.fontSize="2000px";r.innerHTML="&nbsp;";e.appendChild(r);l.appendChild(e);l=r.getBoundingClientRect();e.parentNode.removeChild(e);x/=l.height/l.width}if(0<q&&g>q&&5E3>g){e=a.innerHTML;l="";k=a.currentStyle||window.getComputedStyle(a,
null);r="justify"===k.textAlign;for(u=Math.round(u/h);1<u;){w=null;var g=Math.round((g+x)/u-x),h=Math.round((e.length+1)/u)-1,n=new y;z(a,e,q,g,-1,h,n);var t=new y,h=n.index;z(a,e,q,g,1,h,t);n.reset();h=t.index;z(a,e,q,g,-1,h,n);h=0===n.index?t.index:q<t.width||n.index===t.index?n.index:Math.abs(g-n.width)<Math.abs(t.width-g)?n.index:t.index;g=e.substr(0,h);r?l+=C(a,g,q):(l+=g.replace(/\s$/,""),l+='<br data-owner="balance-text">');e=e.substr(h);u--;a.innerHTML=e;g=a.offsetWidth}a.innerHTML=r?l+C(a,
e,q):l+e}a.style.whiteSpace=f;a.style.cssFloat=c;a.style.display=m;a.style.position=v;a.style.lineHeight=p}}};v.balanceText=D;v.balanceText.update=D;v.balanceText.disable=function(b){if(void 0!==b){void 0===b.length&&(b=[b]);for(var d=0;d<b.length;d++)B(b[d])}}})("undefined"!==typeof module&&module.exports?module.exports:self||{});
